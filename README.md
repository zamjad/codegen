# Code Genrate

This simple code generate written in Python using regular expression to parse SQL statement and generate CRUD methods in GO programming language. 

## Usage
Here is the usage of this withgiven example_usage.py program

python ./example_usage.py -i Employee.sql -o Employee.go

This is a first quick version of the program and there are lots of room for improvements in it. It can be enhanced to generate code in other programming languages, in addition to GO and may also include more features. 

## Sample Input file
If we provide this sample SQL input file to the program

```
CREATE TABLE Employees (
    EmployeeID INT NOT NULL PRIMARY KEY,
    FirstName VARCHAR(50) NOT NULL,
    LastName VARCHAR(50) NOT NULL,
    Email VARCHAR(100),
    PhoneNumber VARCHAR(20),
    HireDate DATE NOT NULL,
    Salary DECIMAL(10, 2) NULL,
    DepartmentID INT NULL
);
```

## Sample Output file
We will get the following Go code generated by this

```
package repository

import (
	"database/sql"
	"errors"
)

type Employees struct {
	Employeeid int `json:"employeeid"`
	Firstname sql.NullString `json:"firstname"`
}

type RepoEmployees struct {
	DB *sql.DB
}

// NewRepoEmployees creates a new repository for Employees.
func NewRepoEmployees(db *sql.DB) *RepoEmployees {
	return &RepoEmployees{DB: db}
}

// Insert a new Employees into the database.
func (repo *RepoEmployees) Insert(employees *Employees) error {
	var count int
	err := repo.DB.QueryRow("SELECT COUNT(*) FROM Employees WHERE Employeeid = @Employeeid", sql.Named("Employeeid", employees.Employeeid)).Scan(&count)
	if err != nil {
		return err
	}

	if count == 0 {
		query := "INSERT INTO Employees (FirstName) VALUES (@FirstName)"
		stmt, err := repo.DB.Prepare(query)
		if err != nil {
			return err
		}
		defer stmt.Close()

		_, err = stmt.Exec(sql.Named("FirstName", employees.Firstname))
		if err != nil {
			return err
		}
	}
	return nil
}


// Update an existing Employees in the database.
func (repo *RepoEmployees) Update(employees *Employees) error {
	query := "UPDATE Employees SET FirstName = @FirstName WHERE EmployeeID = @EmployeeID"
	stmt, err := repo.DB.Prepare(query)
	if err != nil {
		return err
	}
	defer stmt.Close()

	_, err = stmt.Exec(sql.Named("FirstName", employees.Firstname), sql.Named("EmployeeID", employees.Employeeid))
	if err != nil {
		return err
	}

	return nil
}


// retrieves Employees from the database by its primary key.
func (repo *RepoEmployees) GetEmployeesByID(id int) (*Employees, error) {
	query := "SELECT EmployeeID, FirstName FROM Employees WHERE EmployeeID = @EmployeeID"
	row := repo.DB.QueryRow(query, sql.Named("EmployeeID", id))

	var employees Employees
	err := row.Scan(&employees.Employeeid, &employees.Firstname)
	if err != nil {
		return nil, err
	}

	return &employees, nil
}


// Delete Employees from the database by its primary key.
func (repo *RepoEmployees) Delete(Employeeid int) error {
	result, err := repo.DB.Exec("DELETE FROM Employees WHERE EmployeeID = @EmployeeID", sql.Named("EmployeeID", Employeeid))

	if err != nil {
		return err
	}
	rowsAffected, _ := result.RowsAffected()

	if rowsAffected == 0{
		return errors.New("item not found")
	}
	return nil
}
```

